{#
/**
 * @file
 * Varbase Bootstrap Paragraphs template for displaying a Text and Image layout.
 *
 * @see template_preprocess_paragraph()
 *
 * @ingroup themeable
 */
#}

{{ attach_library('varbase_bootstrap_paragraphs/vbp-default') }}
{{ attach_library('vbp_text_and_image/vbp_text_and_image_default') }}
{{ attach_library('varbase_bootstrap_paragraphs/vbp-colors') }}

{# Layout width. #}
{% if content.bp_width|render %}
  {% set layout_width = content.bp_width['#items'].getString() %}
  {% set layout_width_classes = [ layout_width] %}
{% endif %}

{# Background color. #}
{% if content.bp_background|render %}
  {% set layout_background = content.bp_background['#items'].getString() %}
  {% set layout_background_classes = [ layout_background ] %}
{% endif %}

{# Renders Column Style field. #}
{# Sets class name from values in database. #}
{% if content.text_and_image_style|render %}
  {% set fields_style = content.text_and_image_style['#items'].getString() %}
  {% set col_1 = [
    'paragraph--style--50-50' == fields_style ? 'col-lg-6',
    'paragraph--style--75-25' == fields_style ? 'col-lg-9',
    'paragraph--style--66-33' == fields_style ? 'col-lg-8',
    'paragraph--style--25-75' == fields_style ? 'col-lg-3',
    'paragraph--style--33-66' == fields_style ? 'col-lg-4',
  ]
  %}
  {% set col_2 = [
    'paragraph--style--50-50' == fields_style ? 'col-lg-6',
    'paragraph--style--75-25' == fields_style ? 'col-lg-3',
    'paragraph--style--66-33' == fields_style ? 'col-lg-4',
    'paragraph--style--25-75' == fields_style ? 'col-lg-9',
    'paragraph--style--33-66' == fields_style ? 'col-lg-8',
  ]
  %}
{% endif %}

{# The template default set classes. #}
{%
set classes = [
'paragraph',
'paragraph--type--' ~ paragraph.bundle|clean_class,
view_mode ? 'paragraph--view-mode--' ~ view_mode|clean_class,
]
%}

{# Merges Background color with classes. #}
{% set background_field = content.bp_background|render %}
{% if background_field %}
  {% set classes = classes|merge(layout_background_classes) %}
{% endif %}

{# Merges Width field with classes. #}
{% set width_field = content.bp_width|render %}
{% if width_field %}
  {% set classes = classes|merge(layout_width_classes) %}
{% endif %}

{# Row classes. #}
{% set row_attribute = create_attribute() %}
{% set width_field = content.bp_width|render %}
{%
  set row_classes = [
    'row',
    'paragraph__column'
  ]
%}

{% if width_field %}
  {% set row_classes = row_classes|merge(layout_width_classes) %}
{% endif %}

{# Set the width to be Edge to Edge. #}
{% set attributes = attributes.addClass('bg-edge2edge') %}

{# Prints div with classes, and content. #}
<div{{ attributes.addClass(classes) }}>

{# Check the Image position field. #} 
{% set align = content.field_image_position['#items'].getString() %}
  {% if align == "left"%}
  	{% set img_align = 'align2left' %}
  	{% set txt_align = 'align2right' %}
  {% else %}
  	{% set img_align = 'align2right' %}
  	{% set txt_align = 'align2left' %}
  {% endif %}

{% set image_attr = create_attribute() %}
{% set image_attr = image_attr.addClass('no-paddings').addClass(img_align) %}

{# Set text field attributes. #}
{% set text_attr = create_attribute() %}
{% set text_attr = text_attr.addClass(txt_align).addClass('wrapper') %}

  <div{{ row_attribute.addClass(row_classes) }} {% if VBP.background_image.url %} style="background-image:url({{- VBP.background_image.url -}});" {% endif %}>
      <div{{ image_attr.addClass(col_1) }}>{{ content.field_image|render }}</div>
      <div{{ text_attr.addClass(col_2) }}>{{ content.field_text_content|render }}</div>
  </div>
</div>
